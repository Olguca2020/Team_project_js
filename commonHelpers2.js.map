{"version":3,"file":"commonHelpers2.js","sources":["../src/js/filters.js","../src/API.js","../src/js/products-list.js","../src/local-storage.js","../src/refs.js","../src/js/popular-products.js","../src/js/modalproductcard.js","../src/main.js"],"sourcesContent":["import SlimSelect from 'slim-select';\nimport '../../node_modules/slim-select/dist/slimselect.css';\n\nnew SlimSelect({\n    select: '#single'\n})\n\nconst searchForm = document.querySelector('.filters-form');\n\nsearchForm.addEventListener ('submit', event => {\n  event.preventDefault();\n});","import axios from 'axios'\n\n\n\n\nexport async function fetchCategories() {\n    const url = 'https://food-boutique.b.goit.study/api/products/categories';\n    try {\n      const res = await axios.get(url);\n      return res.data;\n    } catch (error) {\n      console.error('Помилка під час запиту:', error);\n      return [];\n    }\n  }\n\n \n\n  export async function fetchData({ keyword, category, page, limit }) {\n  const url = 'https://food-boutique.b.goit.study/api/products';\n \n    const response = await axios.get(url, {\n      params: { keyword, category, page, limit },\n    }); \n    return response.data; \n}\n\n//Для примера вида параметра, который будет приходить в fetchData\n// const params = {\n//   keyword: 'Ac',\n//   category: 'Fresh_Produce',\n//   page: 1,\n//   limit: 1,\n// };\n\n// fetchData(params);\nexport async function popularProdact() {\n  const url = 'https://food-boutique.b.goit.study/api/products/popular';\n      const res = await axios.get(url);\n    return res.data;  \n}\n\nexport async function discountProduct() {\n  const url = 'https://food-boutique.b.goit.study/api/products/discount';  \n    const res = await axios.get(url);\n    return res.data;   \n}\n\nexport async function findProductCard(id) {\n  const url = `https://food-boutique.b.goit.study/api/products/${id}`;\n  const res = await axios.get(url);\n  return res.data;\n  }\n\n\n\nexport async function postSubscribe(email){\n  const url='https://food-boutique.b.goit.study/api/subscription';\n  const emailData ={\n    email:email\n  };\n  try {\n    const res = await axios.post(url,emailData);\n  alert(res.data.message);\n  console.log(res.data);\n  return res.data; \n}  catch(error){    \n      alert('Oops! Something went wrong');\n      console.error('Произошла ошибка при отправке:', error);\n      throw error;     \n  }\n}\n\n\nexport async function postOrders({email, products}){\n  const url='https://food-boutique.b.goit.study/api/orders';\n  const order ={\n    email:email,\n    products:products\n  };\n  try {\n    const res = await axios.post(url,order);\n  alert(res.data.message);\n  console.log(res.data);\n  return res.data; \n}  catch(error){    \n      alert('Oops! Something went wrong');\n      console.error('Произошла ошибка при отправке:', error);\n      throw error;     \n  }\n}\n//То что должно прилететь как параметр в postOrder\n// const orderData = {\n//   email: 'examp@email5799.com',\n//   products: [\n//     { productId: \"640c2dd963a319ea671e383b\",\n//      amount: 2 }   \n//   ]\n// };\n\n\n\n \n\n","import sprite from '../img/sptite.svg';\nimport { fetchData } from '../API.js';\nconst container = document.querySelector('.products-list');\n\nconst defaultParams = {\n  keyword: null,\n  category: null,\n  page: 1,\n  limit: 6,\n};\n// window.onresize = productsGeneretor;\n\nfunction limitChange(obj) {\n  if (window.innerWidth < 768) {\n    obj.limit = 6;\n  } else if (window.innerWidth >= 768 && window.innerWidth < 1440) {\n    obj.limit = 8;\n  } else {\n    obj.limit = 9;\n  }\n  return obj;\n}\n\nexport async function productsGeneretor() {\n  if (localStorage.getItem('settings')) {\n    return await render(JSON.parse(localStorage.getItem('settings')));\n  }\n  return await render(defaultParams);\n}\n\nasync function render(params) {\n  try {\n    // limitChange(params);\n    const data = await fetchData(params);\n    container.innerHTML = createCardMarkup(data.results);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction createCardMarkup(arr) {\n  return arr\n    .map(\n      ({\n        name,\n        img,\n        category,\n        size,\n        popularity,\n        price,\n        is10PercentOff: discount,\n        _id,\n      }) => {\n        if (category.includes('_')) {\n          category = category.split('_').join(' ');\n        }\n\n        return `\n    <div class=\"productlist-card\" data-id=\"${_id}\">\n    <div class=\"productlist-card-img-wrapper\">\n        <img src=\"${img}\" alt=\"${name}\" class=\"productlist-card-img\" width=\"140\">\n    </div>\n    <h3 class=\"productlist-card-header\">${name}</h3>\n    <div class=\"productlist-card-text-wrapper\">\n        <p class=\"productlist-card-text\">\n          Category: <span class=\"productlist-card-text-span\">${category}</span>\n        </p>\n        <p class=\"productlist-card-text\">\n          Size: <span class=\"productlist-card-text-span\">${size}</span>\n        </p>\n        <p class=\"productlist-card-text\">\n          Popularity: <span class=\"productlist-card-text-span\">${popularity}</span>\n        </p>\n    </div>\n\n    <div class=\"productlist-card-bottom\">\n        <span class=\"productlist-card-price\">$${price}</span>\n        <button type=\"button\" class=\"productlist-card-btn\">\n            <svg class=\"productlist-card-icon-cart\" width=\"18\" height=\"18\">\n                <use href=\"${sprite}#icon-cart\"></use>\n            </svg></button>\n    </div>\n    ${\n      discount\n        ? `<svg class=\"productlist-dicount\" width=\"60\" height=\"60\">\n      <use href=\"${sprite}#icon-discount\"></use>\n    </svg>`\n        : ``\n    }\n</div>\n  `;\n      }\n    )\n    .join('');\n}\n","const basedParameters = {\n  keyword: null,\n  category: null,\n  page: 1,\n  limit: 6,\n};\n\nconst cart = [];\n\nexport function localStorageSettings() {\n  localStorage.setItem('settings', JSON.stringify(basedParameters));\n}\nexport function localStorageCart() {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n","export const popular_products_ul = document.querySelector(\n  '.wrapperPopularProduct'\n);\nexport const body = document.querySelector('body');\n","import { popularProdact } from '../API.js';\nimport { popular_products_ul } from '../refs';\nimport cartIcon from '../img/sptite.svg';\n\ndocument.addEventListener('DOMContentLoaded', onReload);\nasync function onReload() {\n  try {\n    const markup = await generatePopularCardListMarkup();\n    if (markup === undefined) throw new Error();\n\n    updateCardList(markup);\n  } catch (err) {\n    onError(err);\n  }\n}\n\nfunction renderCards({ category, img, name, popularity, size, _id }) {\n  return `\n  <li data-id='${_id}' class=\"popular__products-items  \">\n  <div class=\"img-box\">\n    <img\n      class=\"popular__products-img\"\n      src=\"${img}\"\n      alt=\"${name}\"\n    />\n  </div>\n  <div class=\"info-box\">\n    <h3 class=\"popular__products-name\">${name}</h3>\n    <p class=\"popular__products-text\">\n      Category:\n      <span class=\"js-popular__products-category\">${category}</span>\n    </p>\n    <div class=\"add-ifo-box\">\n      <p class=\"popular__products-text\">\n        Size: <span class=\"js-popular__products-size\">${size}</span>\n      </p>\n      <p class=\"popular__products-text\">\n        Popularity:\n        <span class=\"js-popular__products-popularity\">${popularity}</span>\n      </p>\n    </div>\n  </div>\n  <button class=\"popular__products-button\">\n    <svg class=\"popular__products-svg\" width=\"12\" height=\"12\">\n      <use href=\"${cartIcon}#icon-cart\"></use>\n    </svg>\n  </button>\n</li>\n  `;\n}\n\nasync function generatePopularCardListMarkup() {\n  try {\n    const popularCards = await popularProdact();\n    // console.log(popularCards);\n    return popularCards.reduce(\n      (markup, productCard) => markup + renderCards(productCard),\n      ''\n    );\n  } catch (err) {\n    onError(err);\n  }\n}\n\nfunction updateCardList(markup) {\n  popular_products_ul.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onError() {\n  console.error('Error:', err);\n  popular_products_ul.innerHTML = '';\n}\n","import axios from 'axios';\nimport sprite from '../img/sptite.svg';\nimport { popular_products_ul, body } from '../refs';\n// import { handleModal } from \"./modal\";\n// const ul = document.querySelector('.wrapperPopularProduct');\n// const body = document.querySelector('body');\npopular_products_ul.addEventListener('click', handleCardClick);\n\nasync function handleCardClick(event) {\n  popular_products_ul.removeEventListener('click', handleCardClick);\n\n  if (event.target.closest('button')) {\n    return popular_products_ul.addEventListener('click', handleCardClick);\n  }\n  const product = event.target.closest('li');\n\n  // delete later for button\n  // delete if click is not li\n  const id = product.dataset.id;\n\n  const info = await serviceProductInfo(id);\n  // console.log(info);\n  // createMarkup(info);\n  // console.log(createMarkup(info));\n  body.insertAdjacentHTML('beforeend', createMarkup(info));\n  // handleModal();\n  handleProductModal();\n}\n\nasync function serviceProductInfo(id) {\n  const BASE_URL = 'https://food-boutique.b.goit.study/api/products/';\n\n  return axios\n    .get(`${BASE_URL}${id}`)\n    .then(resp => {\n      return resp.data;\n    })\n    .catch(error => {\n      throw new Error(error);\n    });\n}\n\nfunction createMarkup(info) {\n  const { name, category, size, popularity, desc, price, img } = info;\n  return `\n    <div class=\"backdrop\" data-modal>\n  <div class=\"modal-container\" data-modal>\n    <svg\n      class=\"modal-product-close-icon\"\n      width=\"22\"\n      height=\"22\"\n      data-modal-close\n    >\n      <use href=\"${sprite}#icon-close\"></use>\n    </svg>\n    <div class=\"modal-product-img-text\">\n      <div class=\"modal-product-container-img\">\n        <img\n          class=\"modal-product-img\"\n          src=\"${img}\"\n          alt=\"${name}\"\n          width=\"160\"\n          height=\"160\"\n        />\n      </div>\n      <div class=\"modal-product-text\">\n        <p class=\"modal-product modal-product-name\">${name}</p>\n        <div class=\"modal-container-descs\">\n          <p class=\"modal-product modal-product-desc\">\n            Category:\n            <span class=\"modal-product-desc modal-product-desc-value\"\n              >${category}</span\n            >\n          </p>\n\n          <p class=\"modal-product modal-product-desc\">\n            Size:\n            <span class=\"modal-product-desc modal-product-desc-value\"\n              >${size}</span\n            >\n          </p>\n\n          <p class=\"modal-product modal-product-desc\">\n            Popularity:\n            <span class=\"modal-product-desc modal-product-desc-value\">${popularity}</span>\n          </p>\n        </div>\n\n        <p class=\"modal-product-description\" style=\"overflow-y:auto; max-height: 200px\">\n         ${desc}\n\n        </p>\n      </div>\n    </div>\n\n    <div class=\"container-cost-button\">\n      <p class=\"modal-product-cost\">$${price}</p>\n      <button class=\"modal-wimdow-add-to-cart-btn\">\n        Add to\n        <svg class=\"modal-product-addtocart\" width=\"18\" height=\"18\">\n          <use href=\"${sprite}#icon-cart\"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n</div>\n    \n    `;\n}\n\nfunction handleProductModal() {\n  const closeModalBtn = document.querySelector('[data-modal-close]');\n  const modal = document.querySelector('[data-modal]');\n  const backdrop = document.querySelector('.backdrop');\n\n  closeModalBtn.addEventListener('click', toggleModal);\n  backdrop.addEventListener('click', handleBackdrop);\n  function handleBackdrop(event) {\n    if (event.target !== backdrop) {\n      return;\n    }\n    toggleModal();\n    backdrop.removeEventListener('click', handleBackdrop);\n  }\n  document.addEventListener('keydown', handleKey);\n\n  function handleKey(event) {\n    if (event.code === 'Escape') {\n      toggleModal();\n    }\n  }\n  function toggleModal() {\n    // console.log('!!!!!!!');\n    modal.remove();\n    document.removeEventListener('keydown', handleKey);\n    closeModalBtn.removeEventListener('click', toggleModal);\n  }\n  popular_products_ul.addEventListener('click', handleCardClick);\n}\n","// Запуск сайту та ініціалізація localStorage\nimport { localStorageSettings, localStorageCart } from './local-storage.js';\nlocalStorageSettings();\nlocalStorageCart();\n\n// Відмалювання карток прокутів products-list;\nimport { productsGeneretor } from './js/products-list.js';\nproductsGeneretor();\nimport './js/popular-products.js';\nimport './js/modalproductcard.js';\nimport './js/modal.js';\n"],"names":["SlimSelect","searchForm","event","fetchData","keyword","category","page","limit","url","axios","popularProdact","container","defaultParams","productsGeneretor","render","params","data","createCardMarkup","error","arr","name","img","size","popularity","price","discount","_id","sprite","basedParameters","cart","localStorageSettings","localStorageCart","popular_products_ul","body","onReload","markup","generatePopularCardListMarkup","updateCardList","onError","renderCards","cartIcon","productCard","handleCardClick","id","info","serviceProductInfo","createMarkup","handleProductModal","BASE_URL","resp","desc","closeModalBtn","modal","backdrop","toggleModal","handleBackdrop","handleKey"],"mappings":"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"}