{"version":3,"file":"commonHelpers2.js","sources":["../src/API.js","../src/js/popular-products.js","../src/js/modalproductcard.js"],"sourcesContent":["import axios from 'axios'\n\n\n\nexport async function fetchCategories() {\n    const url = 'https://food-boutique.b.goit.study/api/products/categories';\n    try {\n      const res = await axios.get(url);\n      return res.data;\n    } catch (error) {\n      console.error('Помилка під час запиту:', error);\n      return [];\n    }\n  }\n\n \n\n  export async function fetchData({ keyword, category, page, limit }) {\n  const url = 'https://food-boutique.b.goit.study/api/products';\n \n    const response = await axios.get(url, {\n      params: { keyword, category, page, limit },\n    }); \n    return response.data; \n}\n\n//Для примера вида параметра, который будет приходить в fetchData\n// const params = {\n//   keyword: 'Ac',\n//   category: 'Fresh_Produce',\n//   page: 1,\n//   limit: 1,\n// };\n\n// fetchData(params);\nexport async function popularProdact() {\n  const url = 'https://food-boutique.b.goit.study/api/products/popular';\n      const res = await axios.get(url);\n    return res.data;  \n}\n\nexport async function discountProduct() {\n  const url = 'https://food-boutique.b.goit.study/api/products/discount';  \n    const res = await axios.get(url);\n    return res.data;   \n}\n","import { popularProdact } from \"../API.js\";\n\n\n\ndocument.addEventListener(\"DOMContentLoaded\", onReload);\nconst popularList = document.querySelector(`.wrapperPopularProduct`)\nasync function onReload(){\n  try {\n      const markup = await generatePopularCardListMarkup();\n      if(markup === undefined) throw new Error;\n     \n     updateCardList(markup); \n\n  } catch(err) {\n      onError(err);\n  }\n}\n\nasync function generatePopularCardListMarkup(){\n  try {\n    const popularCards = await popularProdact();\n    return popularCards.reduce((markup, productCard) => markup + renderPopularCards(productCard), '')\n    } \n catch(err) {     \n     onError(err);\n  }\n}\n\nfunction renderPopularCards({img, name, price, size, popularity}){\n  return `\n  <li class=\"list-item\" data-id=\"\">\n      <img class=\"img-popular\" src=\"${img}\" alt=\"\">     \n          <h3 class=\"popular-title\">${name}</h3>\n          <p class=\"popular-desc\">${price}</p>\n          <p class=\"popular-desc\">${size}</p>\n          <p class=\"popular-desc\">${popularity}</p>       \n  </li>\n  `\n}\nfunction updateCardList(markup){\n  popularList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onError(){ \n    console.error('Error:', err);\n    popularList.innerHTML = '';\n   \n}\n","import axios from \"axios\";\n// import { handleModal } from \"./modal\";\nconst ul = document.querySelector(\".wrapperPopularProduct\");\nconsole.log(ul);\nconst body = document.querySelector(\"body\")\nul.addEventListener(\"click\", handleCardClick);\n\n\n\n\nasync function handleCardClick(event) {\n    ul.removeEventListener(\"click\", handleCardClick);\n    const product = event.target.closest(\"li\");\n    // delete later for button\n    // delete if click is not li\n    const id = product.dataset.id;\n\n    const info = await serviceProductInfo(id);\n    console.log(info);\n    // createMarkup(info);\n    // console.log(createMarkup(info));\n    body.insertAdjacentHTML(\"beforeend\", createMarkup(info))\n    // handleModal();\nhandleProductModal() \n}\n\n\n\nasync function serviceProductInfo(id) {\n    const BASE_URL = \"https://food-boutique.b.goit.study/api/products/\";\n\n\n\n    return axios.get(`${BASE_URL}${id}`)\n        .then(resp => {\n            return resp.data\n        })\n        .catch(error => {\n            throw new Error(error)\n        })\n}\n\nfunction createMarkup(info) {\n    const { name, category, size, popularity, desc, price, img } = info;\n    return `\n    <div class=\"backdrop\" data-modal>\n  <div class=\"modal-container\" data-modal>\n    <svg\n      class=\"modal-product-close-icon\"\n      width=\"22\"\n      height=\"22\"\n      data-modal-close\n    >\n      <use href=\"../img/sptite.svg#icon-close\"></use>\n    </svg>\n    <div class=\"modal-product-img-text\">\n      <div class=\"modal-product-container-img\">\n        <img\n          class=\"modal-product-img\"\n          src=\"${img}\"\n          alt=\"${name}\"\n          width=\"160\"\n          height=\"160\"\n        />\n      </div>\n      <div class=\"modal-product-text\">\n        <p class=\"modal-product modal-product-name\">${name}</p>\n        <div class=\"modal-container-descs\">\n          <p class=\"modal-product modal-product-desc\">\n            Category:\n            <span class=\"modal-product-desc modal-product-desc-value\"\n              >${category}</span\n            >\n          </p>\n\n          <p class=\"modal-product modal-product-desc\">\n            Size:\n            <span class=\"modal-product-desc modal-product-desc-value\"\n              >${size}</span\n            >\n          </p>\n\n          <p class=\"modal-product modal-product-desc\">\n            Popularity:\n            <span class=\"modal-product-desc modal-product-desc-value\">${popularity}</span>\n          </p>\n        </div>\n\n        <p class=\"modal-product-description\" style=\"overflow-y:auto; max-height: 200px\">\n         ${desc}\n\n        </p>\n      </div>\n    </div>\n\n    <div class=\"container-cost-button\">\n      <p class=\"modal-product-cost\">$${price}</p>\n      <button class=\"modal-wimdow-add-to-cart-btn\">\n        Add to\n        <svg class=\"modal-product-addtocart\" width=\"18\" height=\"18\">\n          <use href=\"../img/sptite.svg#icon-cart\"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n</div>\n    \n    `\n}\n\nfunction handleProductModal() {\n    const closeModalBtn = document.querySelector(\"[data-modal-close]\");\n    const modal = document.querySelector(\"[data-modal]\");\n     const backdrop= document.querySelector(\".backdrop\");\n\ncloseModalBtn.addEventListener(\"click\", toggleModal);\n    backdrop.addEventListener(\"click\", handleBackdrop);\n      function handleBackdrop(event) {\n    if (event.target !== backdrop) {\n      return;\n    }\n          toggleModal();\n              backdrop.removeEventListener(\"click\", handleBackdrop);\n      }\n       document.addEventListener(\"keydown\", handleKey);\n\n      function handleKey(event) {\n        if (event.code === \"Escape\") {\n          toggleModal();\n \n        }\n    }\n function toggleModal() {\n     console.log(\"!!!!!!!\");\n     modal.remove();\n     document.removeEventListener(\"keydown\", handleKey);\n     closeModalBtn.removeEventListener(\"click\", toggleModal);\n }\n    ul.addEventListener(\"click\", handleCardClick);\n}"],"names":["popularProdact","url","axios","onReload","popularList","markup","generatePopularCardListMarkup","updateCardList","onError","productCard","renderPopularCards","img","name","price","size","popularity","ul","body","handleCardClick","event","id","info","serviceProductInfo","createMarkup","handleProductModal","BASE_URL","resp","error","category","desc","closeModalBtn","modal","backdrop","toggleModal","handleBackdrop","handleKey"],"mappings":"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"}