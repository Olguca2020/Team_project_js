{"version":3,"file":"commonHelpers2.js","sources":["../src/API.js","../src/js/products-list.js","../src/js/popular-products.js","../src/js/modalproductcard.js"],"sourcesContent":["import axios from 'axios'\n\n\n\n\nexport async function fetchCategories() {\n    const url = 'https://food-boutique.b.goit.study/api/products/categories';\n    try {\n      const res = await axios.get(url);\n      return res.data;\n    } catch (error) {\n      console.error('Помилка під час запиту:', error);\n      return [];\n    }\n  }\n\n \n\n  export async function fetchData({ keyword, category, page, limit }) {\n  const url = 'https://food-boutique.b.goit.study/api/products';\n \n    const response = await axios.get(url, {\n      params: { keyword, category, page, limit },\n    }); \n    return response.data; \n}\n\n//Для примера вида параметра, который будет приходить в fetchData\n// const params = {\n//   keyword: 'Ac',\n//   category: 'Fresh_Produce',\n//   page: 1,\n//   limit: 1,\n// };\n\n// fetchData(params);\nexport async function popularProdact() {\n  const url = 'https://food-boutique.b.goit.study/api/products/popular';\n      const res = await axios.get(url);\n    return res.data;  \n}\n\nexport async function discountProduct() {\n  const url = 'https://food-boutique.b.goit.study/api/products/discount';  \n    const res = await axios.get(url);\n    return res.data;   \n}\n\nexport async function findProductCard(id) {\n  const url = `https://food-boutique.b.goit.study/api/products/${id}`;\n  const res = await axios.get(url);\n  return res.data;\n  }\n\n\n\nexport async function postSubscribe(email){\n  const url='https://food-boutique.b.goit.study/api/subscription';\n  const emailData ={\n    email:email\n  };\n  try {\n    const res = await axios.post(url,emailData);\n  alert(res.data.message);\n  console.log(res.data);\n  return res.data; \n}  catch(error){    \n      alert('Oops! Something went wrong');\n      console.error('Произошла ошибка при отправке:', error);\n      throw error;     \n  }\n}\n\n\nexport async function postOrders({email, products}){\n  const url='https://food-boutique.b.goit.study/api/orders';\n  const order ={\n    email:email,\n    products:products\n  };\n  try {\n    const res = await axios.post(url,order);\n  alert(res.data.message);\n  console.log(res.data);\n  return res.data; \n}  catch(error){    \n      alert('Oops! Something went wrong');\n      console.error('Произошла ошибка при отправке:', error);\n      throw error;     \n  }\n}\n//То что должно прилететь как параметр в postOrder\n// const orderData = {\n//   email: 'examp@email5799.com',\n//   products: [\n//     { productId: \"640c2dd963a319ea671e383b\",\n//      amount: 2 }   \n//   ]\n// };\n\n\n\n \n\n","import cartIcon from '../img/sptite.svg';\nimport { fetchData } from '../API.js';\nconst container = document.querySelector('.products-list');\n\nconst defaultParams = {\n  keyword: null,\n  category: null,\n  page: 1,\n  limit: 6,\n};\n\nproductsGeneretor();\n// window.onresize = productsGeneretor;\n\nfunction limitChange(obj) {\n  if (window.innerWidth < 768) {\n    obj.limit = 6;\n  } else if (window.innerWidth >= 768 && window.innerWidth < 1440) {\n    obj.limit = 8;\n  } else {\n    obj.limit = 9;\n  }\n  return obj;\n}\n\nasync function productsGeneretor() {\n  if (localStorage.getItem('settings')) {\n    return await render(JSON.parse(localStorage.getItem('settings')));\n  }\n  return await render(defaultParams);\n}\n\nasync function render(params) {\n  try {\n    // limitChange(params);\n    const data = await fetchData(params);\n    container.innerHTML = createCardMarkup(data.results);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction createCardMarkup(arr) {\n  return arr\n    .map(\n      ({\n        name,\n        img,\n        category,\n        size,\n        popularity,\n        price,\n        is10PercentOff: discount,\n        _id,\n      }) => {\n        if (category.includes('_')) {\n          category = category.split('_').join(' ');\n        }\n\n        return `\n    <div class=\"productlist-card\" data-id=\"${_id}\">\n    <div class=\"productlist-card-img-wrapper\">\n        <img src=\"${img}\" alt=\"${name}\" class=\"productlist-card-img\" width=\"140\">\n    </div>\n    <h3 class=\"productlist-card-header\">${name}</h3>\n    <div class=\"productlist-card-text-wrapper\">\n        <p class=\"productlist-card-text\">\n          Category: <span class=\"productlist-card-text-span\">${category}</span>\n        </p>\n        <p class=\"productlist-card-text\">\n          Size: <span class=\"productlist-card-text-span\">${size}</span>\n        </p>\n        <p class=\"productlist-card-text\">\n          Popularity: <span class=\"productlist-card-text-span\">${popularity}</span>\n        </p>\n    </div>\n\n    <div class=\"productlist-card-bottom\">\n        <span class=\"productlist-card-price\">$${price}</span>\n        <button type=\"button\" class=\"productlist-card-btn\">\n            <svg class=\"productlist-card-icon-cart\" width=\"18\" height=\"18\">\n                <use href=\"${cartIcon}#icon-cart\"></use>\n            </svg></button>\n    </div>\n    ${\n      discount\n        ? `<svg class=\"productlist-dicount\" width=\"60\" height=\"60\">\n      <use href=\"../img/sptite.svg#icon-discount\"></use>\n    </svg>`\n        : ``\n    }\n</div>\n  `;\n      }\n    )\n    .join('');\n}\n","import { popularProdact } from \"../API.js\";\n\n\n\ndocument.addEventListener(\"DOMContentLoaded\", onReload);\nconst popularList = document.querySelector(`.wrapperPopularProduct`)\nasync function onReload(){\n  try {\n      const markup = await generatePopularCardListMarkup();\n      if(markup === undefined) throw new Error;\n     \n     updateCardList(markup); \n\n  } catch(err) {\n      onError(err);\n  }\n}\n\nfunction renderCards({img, name, price, size, popularity}){\n    return `\n    <li class=\"list-item\" data-id=\"\">\n      <img class=\"img-popular\" src=\"${img}\" alt=\"\">     \n          <h3 class=\"popular-title\">${name}</h3>\n          <p class=\"popular-desc\">${price}</p>\n          <p class=\"popular-desc\">${size}</p>\n          <p class=\"popular-desc\">${popularity}</p>       \n    </li>\n  `\n}\n    \n\nasync function generatePopularCardListMarkup(){\n  try {\n     const popularCards = await popularProdact();\n     return popularCards.reduce((markup, productCard) => markup + renderCards(productCard), '')\n    } \n catch(err) {     \n     onError(err);\n }\n}\n\n\nfunction updateCardList(markup){\n  popularList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onError(){ \n    console.error('Error:', err);\n    popularList.innerHTML = '';\n   \n}\n","import axios from \"axios\";\n// import { handleModal } from \"./modal\";\nconst ul = document.querySelector(\".wrapperPopularProduct\");\nconsole.log(ul);\nconst body = document.querySelector(\"body\")\nul.addEventListener(\"click\", handleCardClick);\n\n\n\n\nasync function handleCardClick(event) {\n    ul.removeEventListener(\"click\", handleCardClick);\n    const product = event.target.closest(\"li\");\n    // delete later for button\n    // delete if click is not li\n    const id = product.dataset.id;\n\n    const info = await serviceProductInfo(id);\n    console.log(info);\n    // createMarkup(info);\n    // console.log(createMarkup(info));\n    body.insertAdjacentHTML(\"beforeend\", createMarkup(info))\n    // handleModal();\nhandleProductModal() \n}\n\n\n\nasync function serviceProductInfo(id) {\n    const BASE_URL = \"https://food-boutique.b.goit.study/api/products/\";\n\n\n\n    return axios.get(`${BASE_URL}${id}`)\n        .then(resp => {\n            return resp.data\n        })\n        .catch(error => {\n            throw new Error(error)\n        })\n}\n\nfunction createMarkup(info) {\n    const { name, category, size, popularity, desc, price, img } = info;\n    return `\n    <div class=\"backdrop\" data-modal>\n  <div class=\"modal-container\" data-modal>\n    <svg\n      class=\"modal-product-close-icon\"\n      width=\"22\"\n      height=\"22\"\n      data-modal-close\n    >\n      <use href=\"../img/sptite.svg#icon-close\"></use>\n    </svg>\n    <div class=\"modal-product-img-text\">\n      <div class=\"modal-product-container-img\">\n        <img\n          class=\"modal-product-img\"\n          src=\"${img}\"\n          alt=\"${name}\"\n          width=\"160\"\n          height=\"160\"\n        />\n      </div>\n      <div class=\"modal-product-text\">\n        <p class=\"modal-product modal-product-name\">${name}</p>\n        <div class=\"modal-container-descs\">\n          <p class=\"modal-product modal-product-desc\">\n            Category:\n            <span class=\"modal-product-desc modal-product-desc-value\"\n              >${category}</span\n            >\n          </p>\n\n          <p class=\"modal-product modal-product-desc\">\n            Size:\n            <span class=\"modal-product-desc modal-product-desc-value\"\n              >${size}</span\n            >\n          </p>\n\n          <p class=\"modal-product modal-product-desc\">\n            Popularity:\n            <span class=\"modal-product-desc modal-product-desc-value\">${popularity}</span>\n          </p>\n        </div>\n\n        <p class=\"modal-product-description\" style=\"overflow-y:auto; max-height: 200px\">\n         ${desc}\n\n        </p>\n      </div>\n    </div>\n\n    <div class=\"container-cost-button\">\n      <p class=\"modal-product-cost\">$${price}</p>\n      <button class=\"modal-wimdow-add-to-cart-btn\">\n        Add to\n        <svg class=\"modal-product-addtocart\" width=\"18\" height=\"18\">\n          <use href=\"../img/sptite.svg#icon-cart\"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n</div>\n    \n    `\n}\n\nfunction handleProductModal() {\n    const closeModalBtn = document.querySelector(\"[data-modal-close]\");\n    const modal = document.querySelector(\"[data-modal]\");\n     const backdrop= document.querySelector(\".backdrop\");\n\ncloseModalBtn.addEventListener(\"click\", toggleModal);\n    backdrop.addEventListener(\"click\", handleBackdrop);\n      function handleBackdrop(event) {\n    if (event.target !== backdrop) {\n      return;\n    }\n          toggleModal();\n              backdrop.removeEventListener(\"click\", handleBackdrop);\n      }\n       document.addEventListener(\"keydown\", handleKey);\n\n      function handleKey(event) {\n        if (event.code === \"Escape\") {\n          toggleModal();\n \n        }\n    }\n function toggleModal() {\n     console.log(\"!!!!!!!\");\n     modal.remove();\n     document.removeEventListener(\"keydown\", handleKey);\n     closeModalBtn.removeEventListener(\"click\", toggleModal);\n }\n    ul.addEventListener(\"click\", handleCardClick);\n}"],"names":["fetchData","keyword","category","page","limit","url","axios","popularProdact","container","defaultParams","productsGeneretor","render","params","data","createCardMarkup","error","arr","name","img","size","popularity","price","discount","_id","cartIcon","onReload","popularList","markup","generatePopularCardListMarkup","updateCardList","onError","renderCards","productCard","ul","body","handleCardClick","event","id","info","serviceProductInfo","createMarkup","handleProductModal","BASE_URL","resp","desc","closeModalBtn","modal","backdrop","toggleModal","handleBackdrop","handleKey"],"mappings":"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"}