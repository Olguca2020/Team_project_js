{"version":3,"file":"footer-dbcac66d.js","sources":["../../src/API.js","../../src/img/subscribing-modal@1x.png","../../src/img/subscribing-modal@2x.png","../../src/img/sptite.svg","../../src/js/modalfooter.js","../../src/js/footer.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchCategories() {\n  const url = 'https://food-boutique.b.goit.study/api/products/categories';\n  try {\n    const res = await axios.get(url);\n    return res.data;\n  } catch (error) {\n    console.error('Помилка під час запиту:', error);\n    return [];\n  }\n}\n\nexport async function fetchData({ keyword, category, page, limit }) {\n  const url = 'https://food-boutique.b.goit.study/api/products';\n\n  const response = await axios.get(url, {\n    params: { keyword, category, page, limit },\n  });\n  return response.data;\n}\n\n//Для примера вида параметра, который будет приходить в fetchData\n// const params = {\n//   keyword: 'Ac',\n//   category: 'Fresh_Produce',\n//   page: 1,\n//   limit: 1,\n// };\n\n// fetchData(params);\nexport async function popularProdact() {\n  const url = 'https://food-boutique.b.goit.study/api/products/popular';\n  const res = await axios.get(url);\n  return res.data;\n}\n\nexport async function discountProduct() {\n  const url = 'https://food-boutique.b.goit.study/api/products/discount';\n  const res = await axios.get(url);\n  return res.data;\n}\n\nexport async function findProductCard(id) {\n  const url = `https://food-boutique.b.goit.study/api/products/${id}`;\n  const res = await axios.get(url);\n  return res.data;\n}\n\nexport async function postSubscribe(email) {\n  const url = 'https://food-boutique.b.goit.study/api/subscription';\n  const emailData = {\n    email: email,\n  };\n  try {\n    const res = await axios.post(url, emailData);\n    return {\n      success: true,\n      data: res.data,\n    };\n  } catch (error) {\n    if (error.response && error.response.status === 409) {      \n      return {\n        success: false,\n        status: 409,\n        message: 'Email already subscribed',\n      };\n    } else {      \n      console.error('Произошла ошибка при отправке:', error);\n      return {\n        success: false,\n        status: error.response ? error.response.status : null,\n        message: 'Oops! Something went wrong',\n      };\n    }\n  }\n}\n\n\nexport async function postOrders({ email, products }) {\n  const url = 'https://food-boutique.b.goit.study/api/orders';\n  const order = {\n    email: email,\n    products: products,\n  };\n  try {\n    const res = await axios.post(url, order);\n    // alert(res.data.message);\n    // console.log(res.data);\n    return res.data;\n  } catch (error) {\n    alert('Oops! Something went wrong');\n    console.error('Произошла ошибка при отправке:', error);\n    throw error;\n  }\n}\n//То что должно прилететь как параметр в postOrder\n// const orderData = {\n//   email: 'examp@email5799.com',\n//   products: [\n//     { productId: \"640c2dd963a319ea671e383b\",\n//      amount: 2 }\n//   ]\n// };\n","export default \"__VITE_ASSET__09735f6d__\"","export default \"__VITE_ASSET__40f8c5eb__\"","export default \"__VITE_ASSET__a34c4524__\"","import img from '../img/subscribing-modal@1x.png'\nimport img2x from '../img/subscribing-modal@2x.png'\nimport cartIcon from '../img/sptite.svg';\n\nexport function showModalEmail() {\n  const body = document.querySelector('body');\n\n  body.insertAdjacentHTML('beforeend', createMarkupEmail());\n  handleModal();\n}\nexport function showModalSubscr() {\n  const body = document.querySelector('body');\n\n  body.insertAdjacentHTML('beforeend', createMarkupSubscr());\n  handleModal();\n}\n\n// showModal()\n// function showModal() {\n//     const body = document.querySelector('body');\n\n//     /*перевірка чи такий емейл уже був уведений*/\n\n//     if (true) {\n//         body.insertAdjacentHTML('beforeend', createMarkupEmail());\n//         handleModal();\n//     }\n//     // else {\n//     //     body.insertAdjacentHTML('beforeend', createMarkupSubscr());\n//     //           handleModal();}\n// //       if(true) {\n// //         body.insertAdjacentHTML('beforeend', createMarkupSubscr());\n// //               handleModal();\n// // }\n// }\nfunction createMarkupEmail() {\n  return `\n    <div class=\"backdrop\" data-modal>\n  <div class=\"modal-container email-container modal-product\" data-modal>\n    <svg\n      class=\"modal-product-close-icon\"\n      width=\"22\"\n      height=\"22\"\n      data-modal-close\n    >\n      <use href=\"${cartIcon}#icon-close\"></use>\n    </svg>\n    <div class=\"modal-wrapper-title\">\n      <p class=\"modal-subscr-title\">\n        This <span class=\"modal-subscr-title-accent\">email address</span> has\n        already been entered\n      </p>\n    </div>\n    <div class=\"modal-wrapper-text\">\n      <p class=\"modal-subcr-text\">\n        You have already subscribed to our new products. Watch for offers at the\n        mailing address.\n      </p>\n    </div>\n  </div>\n</div>\n\n    \n    `;\n}\n\nfunction createMarkupSubscr() {\n  return `\n   <div class=\"backdrop back-drop-sub\" data-modal>\n  <div class=\"modal-container subscribing-container modal-product\" data-modal>\n    <svg\n      class=\"modal-product-close-icon sub-icon\"\n      width=\"22\"\n      height=\"22\"\n      data-modal-close\n    >\n      <use href=\"${cartIcon}#icon-close\"></use>\n    </svg>\n    <div class=\"modal-wrapper-title\">\n      <p class=\"modal-subscr-title\">\n        Thanks for subscribing for\n        <span class=\"modal-subscr-title-accent\">new</span> products\n      </p>\n    </div>\n    <div class=\"modal-wrapper-text\">\n      <p class=\"modal-subcr-text\">\n        We promise you organic and high-quality<br />\n        products that will meet your expectations.<br />\n        Please stay with us and we promise you many pleasant surprises.\n      </p>\n    </div>\n\n    <img\n      class=\"modal-subcr-img\"\n      srcset=\"\n        ${img} 1x,\n        ${img2x} 2x\n      \"\n      src=\"${img}\"\n      width=\"335\"\n      height=\"144\"\n      alt=\"Vegetables\"\n    />\n  </div>\n</div>\n    \n    `;\n}\nfunction handleModal() {\n  const closeModalBtn = document.querySelector('[data-modal-close]');\n  const backdrop = document.querySelector('.backdrop');\n  //   const modal = document.querySelector('[data-modal]');\n  //   modal.addEventListener('click', handleProductClick);\n  function toggleModal() {\n    const modal = document.querySelector('[data-modal]');\n    if (modal) {\n      modal.remove();\n      closeModalBtn.removeEventListener('click', toggleModal);\n      document.removeEventListener('keydown', handleKey);\n      backdrop.removeEventListener('click', handleBackdrop);\n    }\n  }\n\n  function handleBackdrop(event) {\n    if (event.target !== backdrop) {\n      return;\n    }\n    toggleModal();\n    backdrop.removeEventListener('click', handleBackdrop);\n  }\n\n  function handleKey(event) {\n    if (event.code === 'Escape') {\n      toggleModal();\n      document.removeEventListener('keydown', handleKey);\n    }\n  }\n  //   ul.addEventListener('click', handleCardClick);\n  //   list.addEventListener('click', handleCardProductClick);\n\n  closeModalBtn.addEventListener('click', toggleModal);\n  backdrop.addEventListener('click', handleBackdrop);\n  document.addEventListener('keydown', handleKey);\n\n  // Prevent attaching multiple listeners to the same modal\n  if (!document.querySelector('[data-modal]')) {\n    body.insertAdjacentHTML('beforeend', createMarkup(info));\n  }\n}\n","import {postSubscribe} from '../API.js';\nimport {showModalEmail,showModalSubscr} from '../js/modalfooter.js';\n\n\nconst submitSubscribe = document.querySelector('.footer-form');\n\nsubmitSubscribe.addEventListener('submit', onSubmit);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  const emailInput = event.target.email;\n  const email = emailInput.value;\n\n  const result = await postSubscribe(email);\n\n  if (result.success) {\n    showModalSubscr();\n    emailInput.value = '';\n  } else {\n    if (result.status === 409) {\n        showModalEmail();\n        emailInput.value = '';\n    } else {      \n      alert(result.message);\n    }\n  }\n}\n"],"names":["fetchCategories","url","axios","error","fetchData","keyword","category","page","limit","popularProdact","discountProduct","postSubscribe","email","emailData","postOrders","products","order","img","img2x","svgIcon","showModalEmail","createMarkupEmail","handleModal","showModalSubscr","createMarkupSubscr","cartIcon","closeModalBtn","backdrop","toggleModal","modal","handleKey","handleBackdrop","event","submitSubscribe","onSubmit","emailInput","result"],"mappings":"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"}